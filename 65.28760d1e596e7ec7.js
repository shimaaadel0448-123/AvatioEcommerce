"use strict";(self.webpackChunkavatio=self.webpackChunkavatio||[]).push([[65],{2065:(b,l,r)=>{r.r(l),r.d(l,{CartDetailsComponent:()=>x});var u=r(8032),s=r.n(u),d=r(2881),m=r(9870),t=r(1360),p=r(3768);const g=()=>["/checkout"];function f(o,c){1&o&&(t.j41(0,"div",14)(1,"div",15)(2,"span",16),t.EFF(3,"Loading..."),t.k0s()()())}function _(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",18)(1,"div"),t.nrm(2,"img",19),t.k0s(),t.j41(3,"div",20)(4,"div",21),t.EFF(5),t.k0s(),t.j41(6,"div",22),t.EFF(7),t.k0s()(),t.j41(8,"div",23)(9,"span"),t.EFF(10,"Quantity:"),t.k0s(),t.j41(11,"span",24),t.EFF(12),t.k0s()(),t.j41(13,"div",25),t.EFF(14),t.k0s(),t.j41(15,"div",26)(16,"button",27),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.remove(n.id))}),t.EFF(17,"\u2716"),t.k0s()()()}if(2&o){const e=c.$implicit;t.R7$(2),t.Y8G("src",e.product_image,t.B4B),t.R7$(3),t.JRh(e.product_name),t.R7$(2),t.SpI("$",e.product_price,""),t.R7$(5),t.JRh(e.quantity),t.R7$(2),t.SpI(" $",e.sub_total," ")}}function v(o,c){if(1&o&&(t.j41(0,"div"),t.DNE(1,_,18,5,"div",17),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.addedProducts)}}let x=(()=>{class o{cartService;addedProducts;subTotal=0;tax=0;c=0;isLoading=!0;constructor(e){this.cartService=e}ngOnInit(){this.cartService.getAllCartItems().subscribe({next:e=>{this.addedProducts=e.results,this.subTotal=this.addedProducts.reduce((i,n)=>i+n.sub_total,0),this.tax=this.addedProducts.reduce((i,n)=>i+n.tax_amount,0),this.isLoading=!1},error:e=>{this.isLoading=!1,401===e.status&&s().fire("Error","Please Login First","error")}})}remove(e){s().fire({title:"Are you sure?",text:"Do you want to remove this item from the cart?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(i=>{i.isConfirmed&&this.cartService.deleteCartItem(e).subscribe({next:()=>{this.addedProducts=this.addedProducts.filter(n=>n.id!=e),this.subTotal=this.addedProducts.reduce((n,a)=>n+a.sub_total,0),this.tax=this.addedProducts.reduce((n,a)=>n+a.tax_amount,0),s().fire("Deleted!","Item has been removed from your cart.","success")},error:n=>{s().fire("Error!","Failed to remove item.","error"),console.log(n)}})})}static \u0275fac=function(i){return new(i||o)(t.rXU(p.m))};static \u0275cmp=t.VBU({type:o,selectors:[["app-cart-details"]],decls:32,vars:7,consts:[[1,"details"],[1,"container","my-4"],[1,"fw-bold","fs-2","text-center","mb-4"],[1,"row","g-4"],[1,"col-lg-7","col-md-12"],["class","text-center my-5",4,"ngIf"],[4,"ngIf"],[1,"col-lg-5","col-md-12"],[1,"cart-summary","mt-3","p-4","rounded"],[1,"fw-bold","mb-4"],[1,"d-flex","justify-content-between","mb-2"],[1,"d-flex","justify-content-between","fw-bold","fs-5","mb-4"],[1,"btn","btn-primary","w-100","mb-3",3,"routerLink"],[1,"btn","btn-secondary","w-100"],[1,"text-center","my-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],["class","item p-3 my-3",4,"ngFor","ngForOf"],[1,"item","p-3","my-3"],["loading","lazy","alt","",1,"img-fluid","product-img","rounded",2,"width","96px","height","96px","object-fit","cover",3,"src"],[1,"detail"],[1,"title"],[1,"total-price"],[1,"buttons"],["id","quantity-value"],[1,"price"],[1,"remove"],[3,"click"]],template:function(i,n){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"h1",2),t.EFF(3,"Shopping Cart"),t.k0s(),t.j41(4,"div",3)(5,"div",4),t.DNE(6,f,4,0,"div",5)(7,v,2,1,"div",6),t.k0s(),t.j41(8,"div",7)(9,"div",8)(10,"h4",9),t.EFF(11,"Cart Summary"),t.k0s(),t.j41(12,"div",10)(13,"span"),t.EFF(14,"Subtotal:"),t.k0s(),t.j41(15,"span"),t.EFF(16),t.k0s()(),t.j41(17,"div",10)(18,"span"),t.EFF(19,"Tax:"),t.k0s(),t.j41(20,"span"),t.EFF(21),t.k0s()(),t.nrm(22,"hr"),t.j41(23,"div",11)(24,"span"),t.EFF(25,"Total"),t.k0s(),t.j41(26,"span"),t.EFF(27),t.k0s()(),t.j41(28,"button",12),t.EFF(29,"Checkout"),t.k0s(),t.j41(30,"button",13),t.EFF(31,"Continue Shopping"),t.k0s()()()()()()),2&i&&(t.R7$(6),t.Y8G("ngIf",n.isLoading),t.R7$(),t.Y8G("ngIf",!n.isLoading),t.R7$(9),t.SpI("",n.subTotal,"$"),t.R7$(5),t.SpI("",n.tax,"$"),t.R7$(6),t.SpI("",n.subTotal+n.tax,"$"),t.R7$(),t.Y8G("routerLink",t.lJ4(6,g)))},dependencies:[d.MD,d.Sq,d.bT,m.Wk],styles:[".item[_ngcontent-%COMP%]{background:var(--card-bg);display:flex;align-items:center;justify-content:space-between;gap:15px;border-radius:10px;flex-wrap:wrap}.item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{flex-shrink:0;border-radius:8px;max-width:100%;height:auto}.detail[_ngcontent-%COMP%]{flex:1;min-width:150px;display:flex;flex-direction:column;align-items:start}.buttons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;border-radius:50%;padding:4px 9px;background-color:#4b5563;color:#fff}.price[_ngcontent-%COMP%]{min-width:80px;text-align:right;font-weight:700}.remove[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--remove);color:var(--remove-txt);border-radius:10px;border:none;transition:transform .3s ease;padding:4px 8px}.remove[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.total-price[_ngcontent-%COMP%]{color:#9ca3af;font-weight:300;font-size:14px}.title[_ngcontent-%COMP%]{font-weight:500;font-size:18px}.cart-summary[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:10px;color:var(--text-color)}@media (max-width: 768px){.item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;text-align:left}.price[_ngcontent-%COMP%]{text-align:left;min-width:auto}.buttons[_ngcontent-%COMP%]{margin-top:10px}.remove[_ngcontent-%COMP%]{align-self:flex-end;margin-top:10px}.cart-summary[_ngcontent-%COMP%]{margin-top:20px}}"]})}return o})()}}]);